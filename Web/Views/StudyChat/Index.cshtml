@{
    ViewData["Title"] = "Study Chat";
    Layout = "~/Views/StudyChat/_ChatLayout.cshtml";
}

<div class="study-chat-container">
    <!-- Left Sidebar -->
    <aside class="chat-sidebar">
        <div class="sidebar-header">
            <h2 class="app-title">StudyChat</h2>
        </div>
        
        <div class="sidebar-content">
            <button class="btn-new-chat" type="button">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16" class="me-2">
                    <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                </svg>
                New Chat
            </button>
            
            <hr class="sidebar-divider" />
            
            <div class="chat-list">
                <div class="chat-item active">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="chat-icon">
                        <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.5a1 1 0 0 0-.8.4l-1.9 2.533a1 1 0 0 1-1.6 0L5.3 12.4a1 1 0 0 0-.8-.4H2a2 2 0 0 1-2-2V2zm3.5 1a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9zm0 2.5a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9zm0 2.5a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5z"/>
                    </svg>
                    <span class="chat-name">Introduction to ASP.NET</span>
                </div>
                
                <div class="chat-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="chat-icon">
                        <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.5a1 1 0 0 0-.8.4l-1.9 2.533a1 1 0 0 1-1.6 0L5.3 12.4a1 1 0 0 0-.8-.4H2a2 2 0 0 1-2-2V2zm3.5 1a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9zm0 2.5a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9zm0 2.5a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5z"/>
                    </svg>
                    <span class="chat-name">Entity Framework Basics</span>
                </div>
                
                <div class="chat-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="chat-icon">
                        <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.5a1 1 0 0 0-.8.4l-1.9 2.533a1 1 0 0 1-1.6 0L5.3 12.4a1 1 0 0 0-.8-.4H2a2 2 0 0 1-2-2V2zm3.5 1a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9zm0 2.5a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9zm0 2.5a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5z"/>
                    </svg>
                    <span class="chat-name">MVC Pattern Explained</span>
                </div>
                
                <div class="chat-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="chat-icon">
                        <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.5a1 1 0 0 0-.8.4l-1.9 2.533a1 1 0 0 1-1.6 0L5.3 12.4a1 1 0 0 0-.8-.4H2a2 2 0 0 1-2-2V2zm3.5 1a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9zm0 2.5a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9zm0 2.5a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5z"/>
                    </svg>
                    <span class="chat-name">Database Design</span>
                </div>
            </div>
        </div>
    </aside>

    <!-- Main Chat Area -->
    <main class="chat-main">
        <!-- Chat Header -->
        <header class="chat-header">
            <h3 class="chat-title">Introduction to ASP.NET</h3>
        </header>

        <!-- Messages Area -->
        <div class="messages-container" id="messagesContainer">
            <!-- User Message -->
            <div class="message user-message">
                <div class="message-bubble">
                    <p>What is ASP.NET Core MVC?</p>
                </div>
            </div>

            <!-- Assistant Message -->
            <div class="message assistant-message">
                <div class="message-bubble">
                    <p>ASP.NET Core MVC is a web framework developed by Microsoft that follows the Model-View-Controller (MVC) architectural pattern. It's used to build modern, scalable web applications and APIs.</p>
                </div>
            </div>

            <!-- User Message -->
            <div class="message user-message">
                <div class="message-bubble">
                    <p>Can you explain the MVC pattern in more detail?</p>
                </div>
            </div>

            <!-- Assistant Message -->
            <div class="message assistant-message">
                <div class="message-bubble">
                    <p>Certainly! The MVC pattern separates an application into three main components:</p>
                    <ul>
                        <li><strong>Model:</strong> Represents the data and business logic</li>
                        <li><strong>View:</strong> Handles the presentation and user interface</li>
                        <li><strong>Controller:</strong> Manages user input and coordinates between Model and View</li>
                    </ul>
                    <p>This separation makes the code more maintainable and testable.</p>
                </div>
            </div>
        </div>

        <!-- Message Input Area -->
        <div class="message-input-container">
            <form class="message-form" id="messageForm">
                <div class="input-wrapper">
                    <textarea 
                        class="message-input" 
                        id="messageInput" 
                        placeholder="Type your message here..." 
                        rows="1"
                        required></textarea>
                    <button type="submit" class="send-button" aria-label="Send message">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576 6.636 10.07Zm-1.138-1.138L13.424 1.87 4.338 6.636l1.16 1.296Z"/>
                        </svg>
                    </button>
                </div>
            </form>
        </div>
    </main>
</div>

@section Scripts {
    <script>
        // Auto-resize textarea
        const messageInput = document.getElementById('messageInput');
        const messagesContainer = document.getElementById('messagesContainer');

        if (messageInput) {
            messageInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = (this.scrollHeight) + 'px';
            });

            // Scroll to bottom on load
            if (messagesContainer) {
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }
        }

        // Handle form submission (placeholder - no actual logic yet)
        const messageForm = document.getElementById('messageForm');
        if (messageForm) {
            messageForm.addEventListener('submit', function(e) {
                e.preventDefault();
                // TODO: Add actual message sending logic
                const input = messageInput.value.trim();
                if (input) {
                    console.log('Message:', input);
                    messageInput.value = '';
                    messageInput.style.height = 'auto';
                }
            });
        }
    </script>
}

